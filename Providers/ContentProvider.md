# ContentProvider
–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π "—Å–µ—Ä–≤–∏—Å", –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º android –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é `provider`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –∑–∞—Ä–∞–Ω–µ–µ –æ–ø–∏—Å–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º, –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º URI ([Uniform Resource Identifier](https://ru.wikipedia.org/wiki/URI)) –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å–æ–≤–º–µ—Å—Ç–Ω–æ.
–ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ **ContentProvider** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–∞—Ä–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ **SQLite** (–≤ –º–æ–µ–º —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ —è —Ö—Ä–∞–Ω—é –≤ SQLite –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É)

–í —Å—Ç–∞—Ç—å–µ "[–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞](https://developer.android.com/guide/topics/providers/content-provider-creating?hl=ru)" –æ—Ç Google Developers —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ContentProvider –≤ —Ä—è–¥–µ —Å–ª—É—á–∞–µ–≤:
>–í–∞–º –Ω–µ –Ω—É–∂–µ–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQLite, –µ—Å–ª–∏ –µ–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

–ò—Ç–∞–∫, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **ContentProvider** –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è —Å –µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –∏ —Å–ø–æ—Å–æ–±–æ–º —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–¥–∞, —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ë–î), —Ç.–∫. **ContentProvider** —à—Ç—É–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º—è –ø–∞–∫–µ—Ç–∞. –Ω–∞–ø—Ä–∏–º–µ—Ä `com.example.appname.provider`
–î–∞–ª–µ–µ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–ø–∏—Å–∞—Ç—å –Ω–∞—à provider –≤ —Ñ–∞–π–ª–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
```xml
<provider
    android:authorities="com.dogvscat.monday.provider"
    android:name=".service.UsersContentProvider" />
```
–ì–¥–µ - `authorities` –∏ –µ—Å—Ç—å –Ω–∞—à –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä.
–¢.–∫. –û—Å–Ω–æ–≤–æ–π –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Ä–µ—Å—É—Ä—Å–∞–º —Å –∏–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **ContentProvider** —è–≤–ª—è–µ—Ç—Å—è URI –≤–∏–¥–∞ `content://<authorities>/<content_path>`, –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–¥—É–º–∞—Ç—å –∫–∞–∫ –º—ã –Ω–∞–∑–æ–≤–µ–º –Ω–∞—à–∏ —Ä–µ—Å—É—Ä—ã (–≤ –º–æ–µ–º —Å–ª—É—á–∞–µ - —Ç–∞–±–ª–∏—Ü—ã –ë–î), –≤ —Å—Ç—Ä–æ–∫–µ URI –∏–º—è —Ç–∞–±–ª–∏—Ü—ã `<content_path>`. –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å `authorities` –∏ –∏–º–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. 

–ó–∞—Ç–µ–º, –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ ContentProvider –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–≥–æ –º–µ—Ç–æ–¥—ã **query()**, **insert()**, **update()**, **delete()**, **getType()**, **onCreate()** ([–≤–æ—Ç –Ω–µ–ø–ª–æ—Ö–∞—è —Å—Ç–∞—Ç—å—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é contentProvider –Ω–∞ Java](http://developer.alexanderklimov.ru/android/theory/contentprovider.php)).
–í—Å–µ –º–µ—Ç–æ–¥—ã –∫—Ä–æ–º–µ **onCreate()** –ø—Ä–∏–Ω–∏–º–∞—é—Ç –Ω–∞ –≤—Ö–æ–¥ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–¥–Ω–æ–≥–æ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ URI —ç–ª–µ–º–µ–Ω—Ç. 

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤–æ–∑–º–æ–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–ª–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é –∏–ª–∏ —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü—ã —Ü–µ–ª–∏–∫–æ–º, —á—Ç–æ–± ContentProvider –º–æ–≥ —Ä–∞–∑–ª–∏—á–∏—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –µ–º—É –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –±—ã–ª –ø—Ä–∏–¥—É–º–∞–Ω –∫–ª–∞—Å—Å **UriMatcher** 
## UriMatcher
–û–Ω –Ω—É–∂–µ–Ω —á—Ç–æ–±—ã "—Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å" –Ω–∞—à URI –Ω–∞ —á–∞—Å—Ç–∏ –∏ –≤–µ—Ä–Ω—É—Ç—å –æ–¥–∏–Ω –∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (—Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—É—é –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É), –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∫–æ–¥–∞ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º
```Kotlin
/**
 * –ü—Ä–∏–º–µ—Ä –Ω–∞ Kotlin
 */
//–û–±—ä—è–≤–ª—è–µ–º –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å UriMatcher
 val URI_USERS = 1
 val URI_USERS_ID = 2
 val uriMatcher: UriMatcher = UriMatcher(UriMatcher.NO_MATCH)
    init {
//–ó–¥–µ—Å—å USER_PATH - –∏–º—è —Ç–∞–±–ª–∏—Ü—ã
        uriMatcher.addURI(AUTHORITY, USER_PATH, URI_USERS)
        uriMatcher.addURI(AUTHORITY, "$USER_PATH/#", URI_USERS_ID)
    }
```
–í –ø—Ä–∏–º–µ—Ä–µ —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤—ã—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º–≤–æ–ª **#** - —ç—Ç–æ —Å–∏–º–≤–æ–ª –ø–æ–¥—Å—Ç–≤–Ω–æ–≤–∫–∏ —É–∫–∞–∑—ã–≤–∞—é—â–∏–π, —á—Ç–æ –Ω–∞ –µ–≥–æ –º–µ—Å—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ –ª—é–±–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ, —Ç–∞–∫–∂–µ –¥–æ–ø—É—Å–∫–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª **"*"**, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∂–µ—Ç –Ω–∞ –ª—é–±—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤ (–∫–∞–∫ –≤ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏)
>–ú–µ—Ç–æ–¥ addURI() —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä **ContentProvider** –∏ –∏–º—è —Ç–∞–ª–∏—Ü—ã —Å —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º. 

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UriMatcher –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö –º–µ—Ç–æ–¥–æ–≤ **ContentProvider** –¥–ª—è –Ω–∞—à–µ–≥–æ **CustomContentProvider**, –≥–¥–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ URI, UriMatcher –≤–µ—Ä–Ω–µ—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É (*–ú–µ—Ç–æ–¥ match() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è URI*) –∏ –Ω–∞–º –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤–∫–ª—é—á–∏—Ç—å switch/case –∏ –æ–±—Ä–∞—Ç–æ—Ç–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

## onCreate()
–í —ç—Ç–æ–º –º–µ—Ç–æ–¥–µ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö (–≤ –º–æ–µ–º —Å–ª—É—á–∞–µ —Å–æ–∑–¥–∞—Ç—å –ë–î). 
>–°–∏—Å—Ç–µ–º–∞ Android –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞.

>–ò–∑–±–µ–≥–∞–π—Ç–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –º–µ—Ç–æ–¥–µ onCreate(). –û—Ç–ª–æ–∂–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–Ω–∏ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ–± —ç—Ç–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ —Ä–∞–∑–¥–µ–ª–µ [–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ onCreate](https://developer.android.com/guide/topics/providers/content-provider-creating?hl=ru#OnCreate).

## query
–ó–∞–ø—Ä–æ—Å –≤ –ë–î. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –æ–±—ä–µ–∫—Ç–∞ Cursor.

## insert
–í—Å—Ç–∞–≤–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ –ë–î. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç URI –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –Ω–æ–≤–æ–π –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.

## delete
–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏–∑ –ë–î. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫.

## update 
–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ –ë–î. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫.

## getType
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç MIME —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö - –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –¥–∞—Ç—å –ø–æ–Ω—è—Ç—å –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –¥–∞–Ω–Ω—ã–µ –∫–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—à **ContentProvider** - –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞–∫–∏–µ —Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ —Å–æ–≤–µ—Ç—É—é —Å —ç—Ç–∏–º –∑–∞–º–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è, –µ—Å–ª–∏ —É —Ç–µ–±—è –≤–æ–∑–Ω–∏–∫–ª–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MIME —Ç–∏–ø—ã —Ç–æ —Ç—ã –∏ —Ç–∞–∫ –∑–Ω–∞–µ—à—å —á—Ç–æ –¥–µ–ª–∞–µ—à—åüòÅ [—Å—Ç–∞—Ç—å—è –ø—Ä–æ MIME —Ç–∏–ø—ã –≤ ContentProvider](https://developer.android.com/guide/topics/providers/content-provider-creating?hl=ru#MIMETypes)

PS: –ë—É–¥—å –∞–∫—É—Ä–∞—Ç–Ω–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `NotNull` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ `Kotlin`, —è –ø–æ—Ç—Ä–∞—Ç–∏–ª –æ–∫–æ–ª–æ 6 —á–∞—Å–æ–≤ –Ω–∞ –ø–æ–∏—Å–∫ –æ—à–∏–±–∫–∏ –≤ query **ContentProvider** –æ–∫–∞–∑–∞–ª–æ—Å—å –¥–µ–ª–æ –±—ã–ª–æ –≤ NotNull –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π 